% ===============================================
% Autor: Josue Arenas Herrera
% Fecha: 4 de noviembre de 2024
% Descripción: Archivo combinado con programas 
%              en C# y ARM64 para convertir una 
%              temperatura de Celsius a Fahrenheit.
% ===============================================

% ===============================================
%               Sección en C#
% ===============================================

% -------- Código en C# (comentado) ------------
% using System;
% 
% class Program
% {
%     // Función que convierte una temperatura de Celsius a Fahrenheit.
%     static double CelsiusToFahrenheit(double celsius)
%     {
%         return (celsius * 9 / 5) + 32; // Fórmula de conversión.
%     }
% 
%     static void Main()
%     {
%         Console.Write("Ingrese la temperatura en Celsius: ");
%         double celsius = Convert.ToDouble(Console.ReadLine());
%         double fahrenheit = CelsiusToFahrenheit(celsius);
% 
%         Console.WriteLine("La temperatura en Fahrenheit es: " + fahrenheit);
%     }
% }
% ----------------------------------------------

% ===============================================
%            Sección en ARM64 Assembly
% ===============================================

% -------- Código en ARM64 Assembly ------------

    .data
celsius:   .double 25.0                // Definimos el valor de entrada en Celsius.
fahrenheit: .double 0.0                // Espacio para almacenar el resultado en Fahrenheit.

    .text
    .global _start

_start:
    // Cargar el valor en Celsius desde la memoria.
    ldr d0, =celsius

    // Realizar la conversión de Celsius a Fahrenheit.
    // Fórmula: Fahrenheit = (Celsius * 9/5) + 32

    // Multiplicar Celsius por 9
    mov x1, #9
    scvtf d1, x1                    // Convertimos 9 a punto flotante
    fmul d0, d0, d1                 // Celsius * 9

    // Dividir por 5
    mov x1, #5
    scvtf d1, x1                    // Convertimos 5 a punto flotante
    fdiv d0, d0, d1                 // (Celsius * 9) / 5

    // Sumar 32 para completar la conversión
    mov x1, #32
    scvtf d1, x1                    // Convertimos 32 a punto flotante
    fadd d0, d0, d1                 // ((Celsius * 9) / 5) + 32

    // Guardar el resultado en la memoria
    str d0, =fahrenheit

    // Finalizar el programa (llamada de salida en Linux)
    mov x8, #93                     // syscall exit
    mov x0, #0                      // código de salida 0
    svc #0                          // llamada al sistema
% ----------------------------------------------
